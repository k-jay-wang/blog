# 在HTML中使用JavaScript

## script元素

像HTML文件中插入js的主要方法，就是使用script元素。HTML4.01为他定义了6个属性：

* async 可选 表示应该立即下载此脚本，但不应妨碍页面中的其他操作，只对外部脚本文件有效。
* charset 可选 表示通过src属性指定的代码的字符集，大多数浏览器会忽略它的值
* defer 可选 表示文件可以延迟到文档被完全解析和展示后再执行。只对外部脚本文件有效
* language 废弃
* src 可选 表示要执行的代码的外部文件地址
* type 可选 可以看成是language的替代属性，表示编写代码所使用的语言的内容类型（MIME类型），在使用script标签嵌入代码时，只需为script 指定type属性，包含在script标签内的代码会被自上而下执行。在解释器对script标签内的所有代码求值完毕之前，页面中的其余内容都不会被浏览器加载或显示。

如果用来获取外部文件，则src是必须的，而且有src属性时，不应在script签之间放代码，因为不会执行嵌入的代码。  
另外，script引用的文件还可以来自外部域，img也一样。  

### 延迟脚本

defer是HTML4.01为script标签定义的，运用此属性，js文件会被立即下载，但是会延迟执行，延迟到整个页面都解析完毕后在运行。（当浏览器解析到</html>后再运行），H5规范要求多个defer文件按他们加载的顺序执行，而defer的脚本会先于DOMContentLoaded事件执行。现实中不一定。。

### 异步脚本

async，浏览器立即下载文件，不保证按照指定他们的先后顺序执行。指定async属性的目的是不让页面等待两个js下载和执行，从而异步加载页面其他内容。因此建议异步脚本不要在加载期间修改DOM。  
异步脚本一定会在页面的load事件前执行，但可能会在DOMContentLoaded事件触发之前或之后执行。

### 在XHTML中的用法

可扩展超文本标记语言，是将HTML作为XML的应用而重新定义的一个标准。但是有一些嵌入代码不生效，比如：if (a < b) {} , 在XHTML中小于号被识别为标签的开始，而小于号后不能跟空格，所以直接报错。  
blabla，了解一下就行

### 不推荐的语法

在内嵌script时，先加个注释，这样不支持JS的浏览器就会忽略这些代码文本。

## 嵌入代码与外部文件

外部文件有如下优点：可维护性好，可缓存，适应未来

## 文档模式

doctype 嘿嘿嘿
最初的两种模式是混杂模式quirks mode和标准模式standards mode， 两种模式主要影响CSS内容的呈现。但在某些情况下也会影响到js的解释执行。  
如果HTML没有指定文档模式，默认会使用混乱模式，此模式下CSS可能会乱哦

## <noscript>元素

noscript标签内可以包含所有DOM标签，除了script，里面的内容在以下情况下会展示:

* 浏览器不支持脚本
* 浏览器支持脚本，但脚本被禁用
